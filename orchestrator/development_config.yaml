# Production Configuration for PaperIgnition Orchestrator
# This configuration is used for production deployment

# Backend Service Configuration
backend_service:
  host: 

  user_db:
    db_user: 
    db_password: 
    db_host: 
    db_port: 
    db_name: 


# Index Service Configuration
index_service:
  host: 

  vector_db:
    model_name: 
    vector_dim: 
    db_path: 

  metadata_db:
    db_url: 

  minio_db:
    endpoint: 
    access_key: 
    secret_key: 
    bucket_name: 
    secure: false

# Pipeline Stages - Enable/disable each stage
stages:
  fetch_daily_papers: false  # Fetch new papers from arXiv
  generate_all_papers_blog: false  # Generate blogs for all fetched papers
  generate_per_user_blogs: true  # Generate personalized blogs for each user

# Paper Pull Service Configuration
paper_pull:
  extractor_type: "html"  # Options: "html", "pdf"
  max_workers: 3  # Number of parallel workers for fetching papers
  time_slots_count: 3  # Number of time slots to divide the day into
  location: "Asia/Shanghai"  # Timezone for time calculations
  count_delay: 2  # Days to delay from current date
  max_papers: 1  # Maximum number of papers to fetch (null for unlimited)

# Blog Generation Configuration
blog_generation:
  batch_size: 50  # Number of papers to process in each batch
  output_path: "/data3/guofang/peirongcan/PaperIgnition/orchestrator/blogs"  # Blog output path for production
  generation_model: "Gemini"  # Options: "Gemini", "vLLM", "OpenAI"

# User Recommendation Configuration
user_recommendation:
  top_k: 5  # Number of top results to return from similarity search
  retrieve_k: 20
  similarity_cutoff: 0.0  # Minimum similarity score threshold
  search_strategy: "vector"  # Options: "vector", "tf-idf", "bm25"
  user_retrieve_result: true  # Whether to save user retrieve result
  customized_recommendation: true # Whether to use customized recommendation reranker

# Job Execution Configuration
job_execution:
  enable_parallel_blog_generation: true  # Run all_papers and per_user blog gen in parallel

# Constants
constants:
  blogbot_email: "BlogBot@gmail.com"  # Special user for all papers blog generation
  store_images_on_index: true  # Store images when indexing papers

# DashScope Configuration (for embedding generation)
dashscope:
  api_key: 
  base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  embedding_model: "text-embedding-v4"
  embedding_dimension: 1536  # HNSW 索引限制 2000 维度
  batch_size: 10
  delay_between_batches: 0.5

# Aliyun OSS Configuration (for cloud blog storage)
aliyun_oss:
  enabled: true  # Set to true to enable cloud backup of blogs
  access_key_id: 
  access_key_secret: 
  endpoint: "oss-cn-hangzhou.aliyuncs.com"  # OSS endpoint
  bucket_name: 
  blogs_prefix: "blogs/"  # Prefix for blog files in OSS
  upload_prefix: "imgs/"  # Prefix for image files in OSS

# Aliyun RDS PostgreSQL Configuration (for cloud database)
aliyun_rds:
  enabled: true  # Set to true to use Aliyun RDS instead of local database
  db_host: 
  db_port: "5432"  # PostgreSQL port
  db_user: 
  db_password: 
  db_name_paper: "paperignition"  # Database name
  db_name_user: "paperignition_user"  # User database name
  sslmode: "prefer"  # SSL mode: require, prefer, or disable