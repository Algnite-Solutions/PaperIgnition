<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - PaperIgnition</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .paper-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .bookmark-btn { padding: 5px 10px; margin: 5px 0; cursor: pointer; }
        .bookmarked { background-color: #dc2626; color: white; }
        .loading { text-align: center; padding: 20px; }
    </style>
</head>
<body>
    <h1>Debug Page - PaperIgnition</h1>
    <div id="papersContainer">Loading...</div>

    <script>
        // Simple test data
        const samplePapers = [
            {
                id: '1',
                title: 'Test Paper 1',
                authors: ['Author 1', 'Author 2'],
                abstract: 'This is a test abstract for paper 1.',
                tags: ['AI', 'ML'],
                publishDate: 'May 2025',
                comments: 'Test paper',
                thumbnail: 'Test'
            },
            {
                id: '2', 
                title: 'Test Paper 2',
                authors: ['Author 3'],
                abstract: 'This is a test abstract for paper 2.',
                tags: ['NLP'],
                publishDate: 'April 2025',
                comments: 'Another test',
                thumbnail: 'Test2'
            }
        ];

        let bookmarkedPapers = new Set();
        let userFavorites = new Set();

        function createPaperCard(paper) {
            const isLoggedIn = false; // For debug, assume not logged in
            const isBookmarked = isLoggedIn ? userFavorites.has(paper.id) : bookmarkedPapers.has(paper.id);
            
            return `
                <div class="paper-card">
                    <h3>${paper.title}</h3>
                    <p><strong>Authors:</strong> ${Array.isArray(paper.authors) ? paper.authors.join(', ') : paper.authors}</p>
                    <p><strong>Abstract:</strong> ${paper.abstract}</p>
                    <p><strong>Published:</strong> ${paper.publishDate} | ${paper.comments}</p>
                    <button class="bookmark-btn ${isBookmarked ? 'bookmarked' : ''}" onclick="toggleBookmark('${paper.id}')">
                        ${isBookmarked ? '★ Saved' : '☆ Save'}
                    </button>
                </div>
            `;
        }

        function toggleBookmark(paperId) {
            const isLoggedIn = false; // For debug
            
            if (!isLoggedIn) {
                if (bookmarkedPapers.has(paperId)) {
                    bookmarkedPapers.delete(paperId);
                } else {
                    bookmarkedPapers.add(paperId);
                }
                localStorage.setItem('bookmarkedPapers', JSON.stringify([...bookmarkedPapers]));
            }
            
            renderPapers();
        }

        function renderPapers() {
            const container = document.getElementById('papersContainer');
            container.innerHTML = samplePapers.map(paper => createPaperCard(paper)).join('');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            const savedBookmarks = localStorage.getItem('bookmarkedPapers');
            if (savedBookmarks) {
                bookmarkedPapers = new Set(JSON.parse(savedBookmarks));
            }
            renderPapers();
        });
    </script>
</body>
</html> 